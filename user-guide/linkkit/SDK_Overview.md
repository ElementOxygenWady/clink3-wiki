# <a name="目录">目录</a>
+ [第一章 设备端C语言Link Kit SDK概述](#第一章 设备端C语言Link Kit SDK概述)
    * [1.1 应用场景说明](#1.1 应用场景说明)
    * [1.2 使用C-SDK对接开发流程](#1.2 使用C-SDK对接开发流程)
        - [准备开发环境](#准备开发环境)
        - [体验主机demo程序](#体验主机demo程序)
        - [体验云端控制台](#体验云端控制台)
        - [交叉编译C-SDK到目标平台](#交叉编译C-SDK到目标平台)
        - [开发对接的HAL层实现](#开发对接的HAL层实现)
        - [将SDK和HAL层实现嵌入到固件中](#将SDK和HAL层实现嵌入到固件中)
        - [编写业务逻辑](#编写业务逻辑)
        - [通过阿里云工单系统获取技术支持](#通过阿里云工单系统获取技术支持)
    * [1.3 名词解释](#1.3 名词解释)
    * [1.4 C-SDK组成部分](#1.4 C-SDK组成部分)
        - [架构框图](#架构框图)
        - [主要目录及文件一览](#主要目录及文件一览)
    * [1.5 C-SDK版本一览](#1.5 C-SDK版本一览)

> 在阅读本手册之前, 建议先快速浏览文档 [阿里云物联网平台接入](https://code.aliyun.com/edward.yangx/public-docs/raw/master/docs/IoT_Basic_Concepts.pdf), 建立一些基本的概念

# <a name="第一章 设备端C语言Link Kit SDK概述">第一章 设备端C语言Link Kit SDK概述</a>

## <a name="1.1 应用场景说明">1.1 应用场景说明</a>

C语言Link Kit SDK适用于使用C语言开发业务处理逻辑的设备, 由于C语言运行速度快/需要的运行内存较少, 目前大多数的IoT设备使用C语言进行功能开发

设备需要支持TCP/IP协议栈或通过AT指令外挂网络通信模组才能集成Link Kit SDK, 对于zigbee/433/KNX这样的非IP设备需要通过集成了Link Kit SDK的网关设备接入到阿里云IoT平台

## <a name="1.2 使用C-SDK对接开发流程">1.2 使用C-SDK对接开发流程</a>
### <a name="准备开发环境">准备开发环境</a>
包括云端的一些准备工作, 如注册阿里云账号, 登录物联网平台控制台页面, 熟悉控制台操作, 创建产品品类和其下的设备实例等, 详见第二章中的 [准备云端控制台环境](#准备云端控制台环境)

也包括本地的一些准备工作, 如安装 `Ubuntu16.04` 开发环境, 安装开发编译环境, 下载C-SDK源代码等, 详见第二章中的 [准备本地开发环境](#准备本地开发环境)

### <a name="体验主机demo程序">体验主机demo程序</a>
C-SDK提供了诸多的功能比如MQTT上云, CoAP上云, OTA下载固件, 高级版物模型等, 并且为每个功能都有相应的例子程序提供

您完成了对开发环境的准备之后, 建议先在 `Ubuntu16.04` 上, 填入自己新申请的设备信息, 再将这些例子源码编译成可执行程序, 运行起来看看效果, 体验这些功能是如何工作的

**强烈建议熟悉这个环节, 这不只是体验, 更重要的是接下来可以在这个环境中开发自己的业务/应用逻辑代码, 调试好后再移到嵌入式目标平台上去, 效率更高**

### <a name="体验云端控制台">体验云端控制台</a>
在体验主机demo程序的过程中, 您可以登录物联网平台的控制台页面

配合我们的文档, 特别是 [第二章 快速体验](#第二章 快速体验), 走一遍流程, 熟悉控制台操作, 最重要的是学会如何在控制台观察和发起设备端和服务器的交互

### <a name="交叉编译C-SDK到目标平台">交叉编译C-SDK到目标平台</a>
阅读 [第三章 移植指南](#第三章 移植指南) 和 [第四章 构建配置说明](#第四章 构建配置说明) 部分, 将C-SDK的源码交叉编译成您所要开发设备的目标嵌入式平台格式

这个环节的成功产物是目标平台格式的二进制静态库文件 `libiot_sdk.a`, 配合我们提供的 `xxx_api.h` 头文件(xxx代表您想要取用的功能点), 您就获得了所谓的SDK

所有的编程API函数在头文件中声明, 在库文件中实现

### <a name="开发对接的HAL层实现">开发对接的HAL层实现</a>
> C-SDK本身是一个不假设自己运行在哪款硬件平台, 以及运行在哪个操作系统(甚至可以没有操作系统)上的跨平台SDK
>
> 它对底层的依赖, 都抽象成一组 `HAL_XXX` 风格的函数接口来代替
>
> 名为 xxx 的功能点所依赖的底层函数, 都将陈列在 src/xxx/xxx_wrapper.h, 例如, MQTT上云这个功能点, 它的外部依赖就在 `src/mqtt/mqtt_wrapper.h`
>
> 实际运行的时候, 需要用户或者硬件平台的提供方, 提供在自己平台上的这些接口函数的实现
>
> C-SDK自带了在 `Ubuntu`, 以及 `Windows` 上对这些接口的实现源码, 可供参考

阅读 第五章中HAL说明部分, 可以了解对应您需要取用的功能点, 分别对应有哪些接口需要您实现, 以及如何参考我们的参考代码来实现

完成之后, 可以编译成一个比如 `libiot_hal.a` 的库文件, 它对应SDK中各种 `xxx_wrapper.h` 头文件中列出函数原型, 库文件中提供函数实现

---
*在C-SDK提供的参考HAL层实现中, 为方便直接修改官方源码完成这个环节, 我们使用著名的开源软件库 mbedtls 实现HAL中安全方面的接口*

*目前, 名为 `HAL_SSL_XXX()` 的函数, 都是基于 mbedtls 来封装实现的*

### <a name="将SDK和HAL层实现嵌入到固件中">将SDK和HAL层实现嵌入到固件中</a>
有了上面说明的 `libiot_sdk.a` 作为能力的核心提供库, 以及您自主开发完成的 `libiot_hal.a` 作为SDK的支撑库, 则重要组件都已就绪

将它们拿到您自己工程的编译系统/编译环境中, 修改编译设置, 使它们被链接到目标固件或者目标应用程序中, 即可使用C-SDK提供的API了

---
建议您阅读第五章中用户编程接口说明部分了解此时可以使用的API

并且可以参照 [第二章 快速体验](#第二章 快速体验) 部分, 直接用例程源码比如 `src/mqtt/examples/mqtt_example.c` 链接上述的库文件, 验证其运行效果是否和在主机上运行demo时一致

### <a name="编写业务逻辑">编写业务逻辑</a>
C-SDK提供的API可以使用之后, 就可以用来编写您自己的业务/应用程序了, 比如上报数据, 订阅主题, 接收命令等

**再次强烈建议在 `Ubuntu16.04` 等主机平台上完成业务逻辑代码的编写和测试, 再移动到嵌入式目标平台上去, 这样如果有问题, 也可以和主机上的同样源码运行效果做对比**

### <a name="通过阿里云工单系统获取技术支持">通过阿里云工单系统获取技术支持</a>
如果您在使用官方SDK的过程中遇到问题, 通过本文档又难以自查, 可通过 [工单系统](https://selfservice.console.aliyun.com/ticket/createIndex) 链接提工单, 会有专业的技术支持团队为您服务
---
*注: 工单系统是使用SDK的客户除本文档外获取技术支持的统一入口, 请勿尝试其它途径*

## <a name="1.3 名词解释">1.3 名词解释</a>
> 为介绍物联网平台, 和它的设备端C-SDK, 我们对相关名词做出以下约定性的概念定义

#### <a name="产品">产品</a>
也称品类, 是一类同样功能的设备的集合, 每个产品都有productKey加以区别, 产品下面可以有成千上万的设备, 并用设备证书区别每个设备

#### <a name="设备">设备</a>
归属于某个品类下的具体设备, 用设备证书区别每个设备, 设备可以直接连接物联网平台, 也可以作为子设备通过网关连接物联网平台

#### <a name="productKey">productKey</a>
productKey是物联网平台为产品颁发的唯一标识. 这个参数很重要, 需要用户保管好, 在设备认证以及通信中都会用到

#### <a name="productSecret">productSecret</a>
是由平台颁发的产品密钥, 通常与ProductKey成对出现, 可用于一型一密的认证方案. 这个参数很重要, 需要用户保管好, 不能泄露

#### <a name="子设备">子设备</a>
也叫从设备, 它本质上仍是设备, 只不过表现形态是是通过另一台设备, 即所谓的网关, 连接到阿里云服务器, 而不是直接连到云端

> 一般这种设备不具有独立自主的因特网(公网)连接能力
>
>> 比如, 蓝牙耳机, Zigbee传感器等, 它们基于自身的蓝牙或Zigbee协议连接到蓝牙网关和Zigbee网关上, 后者建立和阿里云服务器之间的 TCP/IP 连接
>>
>> 当子设备有上报数据时, 数据是先通过阿里不做约束的各种本地网络通道比如蓝牙/Zigbee发送到网关, 再经过用户调用网关API的环节, 从网关和阿里云的通道代为发往云端
>>
>> 当云端有命令下发给子设备时, 命令也是先通过TCP/IP公网通道下发到网关设备, 再经过用户调用网关API的环节, 把命令代为接收和解析后, 通过蓝牙/Zigbee下发给子设备

#### <a name="网关">网关</a>
也叫主设备, 网关是一种直连云端的设备, 但区别于普通设备的地方在于网关设备具备对子设备的管理能力, 并且能够代替子设备连接云端

#### <a name="单品">单品</a>
这是相对于网关的概念来说的, 这样的设备不会将自己和阿里云服务器之间的TCP/IP通道分享给下联的其它设备(子设备)

> 单品设备有直接连云的能力并独占被建立的通道, 不需要为其它设备代为上报数据和接收指令

#### <a name="deviceName">deviceName</a>
用户注册设备时, 自定义生成的设备编号, 可以基于该编号与设备通信, 保证产品维度内的唯一性. 这个参数很重要, 需要用户保管好, 在设备认证以及通信中都会用到

#### <a name="deviceSecret">deviceSecret</a>
物联网平台为设备颁发的设备密钥, 和deviceName成对出现. 这个参数很重要, 需要用户保管好, 在设备认证会用到

#### <a name="Topic类">Topic类</a>
同一产品不同设备所共同定义的Topic集合, 一个Topic类对一个productKey下所有设备通用

#### <a name="Topic">Topic</a>
一个形如"/aaa/bbb/ccc"的字符串, 它在基于发布/订阅模型的通信系统中, 起到类似通信地址的功能, 是消息分发的依据

#### <a name="发布">发布</a>
对应Publish, 表达以某个Topic字符串作为目标地址的发送行为. 可能是设备向云端已定义的Topic做上行发布, 也可能是云端向设备已订阅的Topic做下行发布

#### <a name="订阅">订阅</a>
对应Subscribe, 表达设备向云端申请, 可以接受某个Topic字符串作为目标地址的下推报文的过程. 订阅只有可能是设备向云端做上行订阅

#### <a name="授权">授权</a>
对于设备端, 设备必须具有权限, 才可以往某个Topic发布或订阅消息, 这让用户可以完全控制Topic的消息转发, 帮助用户控制数据的安全性

#### <a name="属性">属性</a>
对应Property, 设备的物模型三要素之一, 一般用于描述设备运行时的状态, 如环境监测设备所读取的当前环境温度等

属性支持get和set, 应用系统可发起对属性的读取和设置请求

#### <a name="服务">服务</a>
对应Service, 设备的物模型三要素之一, 指可被外部调用的能力或方法, 包含输入参数和输出参数

相比于下发指令设置属性值, 服务可通过一条指令实现更加复杂的业务逻辑, 如执行某项特定的任务

#### <a name="事件">事件</a>
对应Event, 设备的物模型三要素之一, 相比于属性状态, 事件一般而言包含设备需要被外部感知和处理的通知信息

可包含多个输出参数, 如某项任务完成的信息或者设备发生故障/告警时的温度等, 事件可以被订阅和推送

#### <a name="RRPC">RRPC</a>
即Revert-RPC. 从字面上理解, 可以实现由服务端请求设备端, 并能够使设备端同步响应的功能

#### <a name="Alink协议">Alink协议</a>
阿里云定义的, 基于JSON格式的, 设备与云端之间的通信协议. 这份协议的完整描述存放在 [官网Alink协议说明](https://help.aliyun.com/document_detail/90459.html) 页面

#### <a name="数据解析脚本">数据解析脚本</a>
针对高级版中采用透传格式/自定义格式的设备, 需要在云端编写数据解析脚本, 将设备上报的二进制数据或者自定义的JSON数据, 转换为平台上的Alink JSON数据格式

#### <a name="设备影子">设备影子</a>
对应Device Shadow, 设备影子是一个JSON文档, 用于存储设备或者应用的当前状态信息

每个设备都会在云端有唯一的设备影子对应, 用户可以使用设备影子通过MQTT或HTTP获取和设置设备的状态, 无论该设备是否连接到Internet

#### <a name="规则引擎">规则引擎</a>
为用户提供类SQL语言的规则引擎, 帮助用户将Topic中的数据进行过滤处理, 并能够将处理后的数据发送到阿里云其他服务, 例如MNS,Table Store,DataHub等等

## <a name="1.4 C-SDK组成部分">1.4 C-SDK组成部分</a>
### <a name="架构框图">架构框图</a>

<img src="https://code.aliyun.com/edward.yangx/public-docs/raw/master/images/sdk_arch.png" width="800" height="450" align="center" />

### <a name="主要目录及文件一览">主要目录及文件一览</a>

    .
    +-- make.settings                       : 记录用户对SDK中哪些功能使用, 哪个功能关闭的配置文件
    +-- makefile                            : 使用 Ubuntu16.04 及SDK自带编译系统时的makefile
    +-- extract.bat                         : 使用 Windows 主机作为开发环境时的代码抽取脚本
    +-- config.bat                          : 使用 Windows 主机作为开发环境时的功能配置脚本
    +-- extract.sh                          : 使用 Linux 主机作为开发环境时的代码抽取脚本
    +-- model.json
    |
    +-- output                              : SDK代码抽取以及编译构建的输出目录
    |   |
    |   +-- eng                             : SDK代码抽取输出目录, 运行 extract.sh 或 extract.bat 后产生
    |   |   +-- dev_model
    |   |   +-- dev_sign
    |   |   +-- infra                       : 被抽取出来的各个功能点实现源码
    |   |   +-- mqtt
    |   |   +-- wrappers
    |   |
    |   +-- examples                        : 被抽取出来的各个功能点API调用例程
    |
    +-- certs                               : 服务端根证书目录, 存放阿里云IoT物联网平台的云端证书
    +-- external_libs                       : SDK使用的第三方开源库
    |   +-- mbedtls
    |   +-- nghttp2
    +-- src                                 : SDK中各个功能点的实现源码, 运行 extract.sh 或 extract.bat 后会抽取到 output
    |   |
    |   +-- infra                           : 基座组件, 用户不必关心, 其内容的多寡由用户选择使用的功能点多少自动适应
    |   +-- dev_sign                        : 设备签名模块, 体积最小的SDK可仅选用此功能
    |   +-- mqtt                            : MQTT上云
    |   +-- coap                            : CoAP上云
    |   +-- http                            : HTTP上云
    |   +-- ota                             : OTA固件升级
    |   +-- dev_model                       : 物模型管理
    |   +-- dynamic_register                : 一型一密
    |   +-- dev_bind                        : 设备绑定
    |   +-- dev_reset                       : 设备重置
    |   +-- http2                           : HTTP2流式传输和文件上传
    |   +-- wifi_provision                  : WiFi配网
    |   +-- atm                             : AT命令辅助模块, 将SDK运行在外挂网络通信模组的MCU上, MCU和模组间用AT指令通信时使用
    |
    +-- tools                               : SDK抽取代码等行为所依赖的主机工具, 用户不必关心
    +-- wrappers                            : SDK对外界依赖的函数接口 HAL_XXX 或者 wrapper_xxx 的参考实现
        +-- atm
        +-- os
        |   +-- freertos                    : SDK运行在FreeRTOS操作系统上的对接代码示例
        |   +-- nos                         : SDK运行在无操作系统的设备上的对接代码示例
        |   +-- ubuntu                      : SDK运行在Ubuntu操作系统上的对接代码示例
        |   +-- nucleus                     : SDK运行在Nucleus操作系统上的对接代码示例
        +-- tls

## <a name="1.5 C-SDK版本一览">1.5 C-SDK版本一览</a>

#### <a name="V3.0.1">V3.0.1</a>
+ 发布日期: 2019/03/15
+ 下载链接: [v3.0.1.zip](https://code.aliyun.com/linkkit/c-sdk/repository/archive.zip?ref=v3.0.1)
+ 更新内容:
    - **新增对异步/通知式的底层TCP/IP协议栈的支持:** 专用于联发科 `MTK2503/MTK6261` 的 Nucleus 系统对接
        + 新增 `FEATURE_ASYNC_PROTOCOL_STACK` 开关支持异步协议栈, 详情介绍请看文档: [异步通知式底层通信模型](http://code.aliyun.com/edward.yangx/public-docs/wikis/user-guide/linkkit/Prog_Guide/AsyncMQTT_Prog)
        + 在异步协议栈支持的基础上, 支持与 `MTK2503/MTK6261` 系统对接, 详情介绍请看文档: [移植到联发科MTK2503/MTK6261](http://code.aliyun.com/edward.yangx/public-docs/wikis/user-guide/linkkit/Port_Guide/Build_MTK2503)
    - **新增以源文件方式移植对接:** 用户可以使用任何自己熟悉或者喜欢的方式编译SDK
        + 提供"配置工具", 用于配置选用SDK的哪些功能点
        + 提供"抽取工具", 用于根据功能点抽取需要的源文件
        + 源文件被抽取后, 在 `output` 目录下, 用户可以用任何方式编译它们
        + 详情介绍请看文档: [不使用SDK自带编译系统时的移植示例](http://code.aliyun.com/edward.yangx/public-docs/wikis/user-guide/linkkit/Port_Guide/Extract_Example)
    - **新增用户需要实现的HAL接口自动整理:** 用户不再会看到自己不需要实现的HAL接口
        + 上述"抽取工具", 会根据所选功能点自动整理待填充的源文件 `output/eng/wrappers/wrapper.c`
        + 用户需要做的只是把这个文件中留空的函数全部按注释实现即可, 不需要查阅文档, 也不会做多余的实现
        + SDK整体性质的 `include/iot_import.h` 也去掉了, 以避免用户看到他其实不必关注的HAL接口声明
    - **新增每个功能点有独立的和风格统一的API声明头文件:** 都在 `src/xxx/xxx_api.h`
        + 目录扁平化处理, 每一个 `src/xxx` 就对应了SDK的一个名字为 `xxx` 的功能点
        + SDK整体性质的 `include/iot_export.h` 也去掉了, 以避免用户看到他其实不必关注的API接口声明
    - **新增HTTP2文件上传的功能:** 在 `src/http2/http2_upload_api.h`, 基于流式传输实现
    - **新增设备签名功能:** 在 `src/dev_sign`, 可计算设备连云签名, 是SDK的最小形态(ROM: `4.5KB`, RAM: `1KB`)
    - **新增设备重置的功能:** 在 `src/dev_reset`, 可用于子设备重置网关对应关系, 或设备和用户绑定关系等
    - **新增简化版的一型一密功能:** 在 `src/dynamic_register`, 只有1个API, 可帮助用户获取`DeviceSecret`
    - **WiFi配网功能中新增了设备热点配网模式:** 在 `src/wifi_provision/dev_ap`, 通过设备开AP来得到SSID和密码
    - **优化了MQTT的建连接口:** 调用时需要用户传入的参数减少了80%
        + 仍然通过 `IOT_MQTT_Construct()` 发起云端建连, 但不再需要调用 `IOT_SetupConnInfo()`
        + 对 `IOT_MQTT_Construct()` 调用时, 结构体入参中的绝大多数都可以不填写, SDK会自动补充默认值

#### <a name="V2.3.0">V2.3.0</a>
+ 发布日期: 2018/11/19
+ 下载链接: [v2.3.0.zip](https://code.aliyun.com/linkkit/c-sdk/repository/archive.zip?ref=v2.3.0)
+ 更新内容:
    - **新增一套物模型编程接口:** 风格为 `IOT_Linkkit_XXX()`, 旧版接口 `linkkit_xxx()` 仍然保留
        * 编程方式简化: 用户不再需要感知TSL, 不需要经历从控制台下载超长JSON然后转换C语言然后嵌入源码的冗繁过程
        * 编程接口剧减: 用户需要了解的编程接口, **从单品/网关场景下共 `45` 个降低到 `9` 个**
        * 内存开销剧减: 用户得到大量的可用内存, **新版接口下设备自身RAM开销是旧版的 `50%` 以下**
        * 负载能力剧增: 受益于内存开销的急剧降低, **网关场景下子设备RAM开销是旧版的 `10%` 以下, 负载能力上升 `1000%` 以上**
        * 外存开销剧减: 新版接口下的物模型部分, **ROM尺寸大约是旧版接口的 `25%` 以下, 全SDK大约是上一版的 `50%` 以下**
        * 极轻模式物模型: 最极端的情况下, 用户 **使用二进制协议做物模型通信, SDK中物模型部分的ROM尺寸可降低到旧版的 `6%` 以下**
    - **新增更多物模型相关能力:** 在资源大幅降低的情况下, SDK的能力不弱反强
        * 增加RRPC调用同步支持, 意味着用户可以在云端控制台定义同步式服务并使用
        * 增加可支持一到任意多个属性的上报, 而不再是过去的要么上报一个属性, 要么上报全量属性
    - **新增MQTT的一系列扩展:** 总体让每个单个接口更加傻瓜化, 多编程接口组合流程也更加灵活
        * 增加极简建联: **建立MQTT连接的时候不再需要像过去那样填写两位数的参数, 支持传 `NULL` 表达使用默认配置或使用已有的默认连接**
        * 增加离线订阅: **通过MQTT订阅的时候不再需要预先连网, 支持传 `NULL` 表达提前订阅, 上线之后SDK自动跟云端交互**
        * 增加极速订阅: **通过MQTT订阅的时候不再需要考虑网络情况, 即使云端的响应由于网络原因尚未到达, SDK自动转发到回调函数**
        * 智能内存管理: **无论是发包还是收包, 不再像过去需要用户填写预留的缓冲区包长, SDK自动根据网络流量按需申请内存**
        * 极简消息发布: **新增了一个编程接口 `IOT_MQTT_Publish_Simple()`, 直接用字符串传参即可发布消息, 不需要组织结构体填参**
        * 同步订阅支持: **新增了一个编程接口 `IOT_MQTT_Subscribe_Sync()`, 订阅成功之前不会返回, 支持需要同步接口的用户**
    - **新增支持自定义域名连云:** 用户可以传入自定义的域名字符串建立MQTT连接, 新增海外地区时不需要等待新版SDK
    - **新增图形化配置方式支持:** 对使用我们推荐的 `64位Ubuntu` 主机作为开发环境的用户, 可以用 `make menuconfig` 图形化编辑SDK配置
    - **WiFi配网的四种模式可以分离:** 如一键配网/零配/路由器配网/手机热点配网
    - **新增支持HTTP2流式传输:** 相对于以往的块式数据传输, **文件/语音/视频的上传速度提高到旧版的 `2000%` 以上, 并且文件越大效果越明显**
    - **新增支持MCU+Modem形式接入:** 这种情况下SDK本身不做网络交互通信, 而是运行在MCU上, 通过AT指令和一块外挂的通信Modem连接网络
    - **新增一系列开发环境的支持:**
        * 支持在搭载 `Windows` 的主机上进行开发, 包括 `cmake` 构建系统和 `Visual Studio 2015` 开发环境
        * 支持在搭载 `MacOS` 的苹果主机上进行开发, 包括 `make` 构建系统和 `cmake` 构建系统
        * 原有的 `Linux` 主机开发环境仍然支持, 包括通过 `make` 或者 `cmake` 构建主机版本和交叉编译嵌入式平台版本

#### <a name="V2.2.1">V2.2.1</a>
+ 发布日期: 2018/08/31
+ 下载链接: [v2.2.1.zip](https://github.com/aliyun/iotkit-embedded/archive/v2.2.1.zip)
+ 更新内容:
    - **新增一型一密/动态注册功能:** 此功能可简化产线生产流程, 使所有设备烧录同样的固件
    - **新增离线倒计时例程:** 用于[飞燕平台](https://living.aliyun.com)的本地倒计时场景演示
    - **新增OTA使用iTLS下载固件:** 在使能iTLS/ID2的情况下, 不再需要HTTPS下载固件
    - **新增WiFi配网功能开源发布:** 在 `src/services/awss` 中, 首次源码发布WiFi配网模块, 用户可自行交叉编译
    - **新增本地通信功能开源发布:** 在 `src/protocol/alcs` 中, 首次源码发布本地通信模块, 用户可自行交叉编译
+ 已知问题:
    - 若要使用WiFi配网功能, 请将 `FEATURE_WIFI_AWSS_ENABLED = y` 一行从 `make.setting` 中移到到第一行, 否则会工作异常

#### <a name="V2.2.0">V2.2.0</a>
+ 发布日期: 2018/08/06
+ 下载链接: [v2.2.0.zip](https://github.com/aliyun/iotkit-embedded/archive/v2.2.0.zip)
+ 更新内容:
    - **服务模块中新增:**
        * 离线Reset功能
        * 设备状态上报
        * 单品/网关统一处理
        * 简化版TSL支持
        * 设备禁用/使能功能
        * 高级版的上下行应答可配置
        * TSL数组中支持Objects类型
    - **通信模块中新增:**
        * MQTT海外多站点连接: 美西/新加坡/德国/日本(预发验证)
        * MQTT批量订阅用于物模型管理
        * HTTP2协议支持
        * iTLS(预置ID2)支持
        * CoAP基于PSK的认证和加密
        * CoAP的DTLS Session复用

#### <a name="V2.1.0">V2.1.0</a>
+ 发布日期: 2018/03/20
+ 下载链接: [RELEASED_V2_1_20180320.zip](https://github.com/aliyun/iotkit-embedded/archive/RELEASED_V2_1_20180320.zip)
+ 更新内容:
    - **新增cmake编译系统:** 可以在linux下或者windows下以cmake编译
    - **新增物模型支持:** 可以支持物模型抽象, 提供属性/服务/事件的相关接口, 可参考[相关公告](https://help.aliyun.com/document_detail/88019.html)

#### <a name="V2.0.3">V2.0.3</a>
+ 发布日期: 2018/01/31
+ 下载链接: [RELEASED_V2_03_20180131.zip](https://github.com/aliyun/iotkit-embedded/archive/RELEASED_V2_03_20180131.zip)
+ 更新内容:
    - **支持主子设备功能:** 设置`FEATURE_SUBDEVICE_ENABLED = y`, 可以支持子设备通过主设备(网关设备)进行数据交互
    - **升级HTTP通道:** 优化HTTP流程
    - **优化TLS:** 修复内存泄漏问题
    - **优化OTA的配置:** 可以更合理的开关OTA功能
    - **升级MQTT通道:** 支持topic更长, 更多的订阅请求; MQTT支持多线程

#### <a name="V2.0.2">V2.0.2</a>
+ 发布日期: 2017/11/30
+ 下载链接: [RELEASED_V2_02_20171130.zip](https://github.com/aliyun/iotkit-embedded/archive/RELEASED_V2_02_20171130.zip)
+ 更新内容:
    - **正式的多平台支持:** 使用`make reconfig`可弹出和选择`Ubuntu16.04`以外的已适配平台
    - **新增Windows版本:** 支持用mingw32编译`Win7`版本的库和例程, 详细可访问[第四章 构建配置系统](#第四章 构建配置系统)
    - **新增OpenSSL适配:** 新增了配合`openssl-0.9.x`+`Windows`版本的HAL参考实现
    - **优化HTTP接口:** HTTP通道方面接口优化, 支持发送报文而不断开TLS连接
    - **自包含的安全库:** 新增裁剪版本的安全库`mbedtls`, 目前已适配`Linux`和`Windows`平台

#### <a name="V2.0.1">V2.0.1</a>
+ 发布日期: 2017/10/10
+ 下载链接: [RELEASED_V2_01_20171010.zip](https://github.com/aliyun/iotkit-embedded/archive/RELEASED_V2_01_20171010.zip)
+ 更新内容:
    - **新增CoAP+OTA:** 允许配置成基于CoAP通知方式的OTA
    - **新增HTTP+TLS:** 在MQTT/CoAP之外, 新增HTTP的通道
    - **细化OTA状态:** 优化OTA部分代码, 使云端可以更细化的区分设备的OTA固件下载状态
    - **ArmCC支持:** 修正了SDK在ArmCC编译器编译时会出现的报错

#### <a name="V2.0.0">V2.0.0</a>
+ 发布日期: 2017/08/21
+ 下载链接: [RELEASED_V2_00_20170818.zip](https://github.com/aliyun/iotkit-embedded/archive/RELEASED_V2_00_20170818.zip)
+ 更新内容:
    - **新增MQTT直连:** 支持更快更轻的连接IoT套件, 去掉对HTTPS/HTTP的依赖, 可参看[相关公告](https://help.aliyun.com/document_detail/57164.html)
    - **新增CoAP通道:** 基于UDP, 在纯上报数据场景更节省资源, 可参看[相关公告](https://help.aliyun.com/document_detail/57566.html)
    - **新增OTA通道:** 提供一系列OTA相关的API, 可查询/触发/下载用户自主上传的固件
    - **升级构建系统:** 支持更灵活的组织和配置SDK

#### <a name="V1.0.1">V1.0.1</a>
+ 发布日期: 2017/06/29
+ 下载链接: [RELEASED_V1_0_1_20170629.zip](https://github.com/aliyun/iotkit-embedded/archive/RELEASED_V1_0_1_20170629.zip)
+ 更新内容:
    - **华东2站点:** 第一个正式配合华东2站点的设备端C-SDK, 全源码发布
    - **新增设备影子功能:** 具体可参看[设备影子介绍页面](https://help.aliyun.com/document_detail/53930.html)

